{% extends "base_generic.html" %} {% block nav %} {% endblock %} {% block title %}Manager dashbored {% endblock %}
{% block content %}


 <div class="container-fluid">
        <div class="team">
            <div class="title">
                <div class="ligne">
                    <h1>Mes équipes</h1>

                </div>
                <div class="trait"></div>
            </div>
    
            <div class="row">
                {% if teams %}
                    {% if teams_nbr > 1 %}
                    {% for team in teams %}
                        <div class="col-xl-3 col-md-4 col-sm6">
                            <div class="card card-team">     
                                <h3 class="title-team">{{ team.titre }}</h3>
                                <div class="description-team">
                                    {% if team.manager.user.first_name %}
                                        <h5>{{ team.manager.user.first_name }} {{ team.manager.user.last_name }}</h5>
                                    {% else %}
                                        <h5>Aucun manager</h5>
                                    {% endif %}
                                    <p>{{ team.description|truncatechars:22  }}</p>
                                </div>
                                <div class="heure-e">
                                    <p>{{ team.nb_emp }}</p>
                                    <p>{{ team.nb_emp_in }}</p>
                                </div>
                                <a class="btn more" href="{% url 'dash:equipe_view' pk=team.id %}">
                                    <i class="fas fa-chevron-right more-icon"></i>
                                </a>
                            
                            </div>
                            
                        </div>   
                    {% endfor %}
                    {% else %} 
                        <div class="cointainer-fluid">
                            <div class="row">
                            <div class="col-xl-4 col-md-6 col-sm-6">
                            <div class="card team text-justify " >
                            <div class="card-body card-b-mydash ">
                                <h2 class="card-title">{{team.titre}}</h2>
                                <h4 class="card-title"> {{team.manager}}</h4>
                                <p> {{team.description}}</p>
                                <div class="right">
                                    <h4>{{colaborators_all_nbr}}</h4>
                                    <i class="fas fa-users"></i>
                                
                                </div>
                                
                            </div>
                            </div>
                        
                        </div>

                        <!--Card stats employés gender-->
                        <div class="col-xl-4 col-md-6 col-sm-6">
                    
                        <div class="card team">
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-8">

                                        <div class="myChartDiv " style="width:260px ;">
                                            <canvas id="employe_gender_chart"></canvas>
                                        </div>

                                    </div>

                                    <div class="col-4">
                                        <h6 class="title-f">Homme</h6>
                                        <p class="description">{{male_collabortors_nbr}} employés</p>
                                        <h6 class="title-h">Femme</h6>
                                        <p class="description">{{female_collabortors_nbr}} employés</p>
                                        <h6 class="title-t">Total</h6>
                                        <p class="description">{{colaborators_all_nbr}} employés</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        </div>

                        <!--Card stats employés présence-->
                        <div class="col-xl-4 col-md-6 col-sm-6">
                    
                        <div class="card team">
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-8">

                                        <div class="myChartDiv " style="width:260px ;">
                                            <canvas id="employe_présence_chart"></canvas>
                                        </div>

                                    </div>

                                    <div class="col-4">
                                        <h6 class="title-f">Entrée</h6>
                                        <p class="description">{{colaborators_in_nbr}} employés</p>
                                        <h6 class="title-h">Sortie</h6>
                                        <p class="description">{{colaborators_out_nbr}} employés</p>
                                        <h6 class="title-t">Total</h6>
                                        <p class="description">{{colaborators_all_nbr}} employés</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        </div>

                </div>
               
                <div class="employe">
                    <!--Lignes card des employés-->
                    <h5>Mes employés</h5>
                    <div class="row row-employe ">
                        {% if colaborators %}
                        {% for col  in colaborators  %}
                            {% if col.user.id != request.user.id %}
                            
                                <div class="col-xl-3 col-md-4 col-sm6">
    
                                    <div class="card card-employe">
    
                                        <img src="/media/images/nounours.png" class="employe-pic rounded-circle" alt="">
                                        <div class="description-employe">
                                            <h5>{{col.user.first_name}} {{col.user.last_name}}</h5>
                                            <p>{{col.fonction}}</p>
                                        </div>
                                        <div class="heure-e">
                                            <p>{{col.laste_entry}}</p>
                                            <p>{{col.in_post_time}}</p>
                                        </div>
    
                                        <a class="btn more" href="{% url 'dash:view_profile' pk=col.user.id %}">
                                            <i class="fas fa-chevron-right more-icon"></i>
                                        </a>
                                        </button>
    
                                    </div>
    
                                </div>
                            {% endif %}    
                        {% endfor %}     
                        {% endif %}
                              
                    </div>
                </div>  
               
                    
                
            
            </div>

                    {% endif %}    
                
                {% endif %}
                    
            </div>
        </div>
    </div>  





    

{% block scripts %}



{% endblock scripts %} 
{% endblock %}